{"version":3,"sources":["app/initialize.js"],"names":["edn","document","addEventListener","submitTimeoutID","inputSource","querySelectorAll","nativizedResponse","submit","method","url","headers","data","encode","Map","kw","value","then","status","Error","innerHTML","parse","at","catch","error","message","window","clearTimeout","setTimeout","keyCode","event","preventDefault"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;IAAYA,G;;AACZ;;;;;;;;AAEAC,SAASC,gBAAT,CAA0B,kBAA1B,EAA8C,YAAM;AAClD,MAAIC,wBAAJ;AACA,MAAMC,cAAcH,SAASI,gBAAT,CAA0B,eAA1B,EAA2C,CAA3C,CAApB;AACA,MAAMC,oBAAoBL,SAASI,gBAAT,CAA0B,qBAA1B,EAAiD,CAAjD,CAA1B;AACA,MAAME,SAAS,SAATA,MAAS,GAAM;AACnB,yBAAM;AACJC,cAAQ,MADJ;AAEJC,WAAK,0BAFD;AAGJC,eAAS,EAAC,gBAAgB,iBAAjB,EAHL;AAIJC,YAAMX,IAAIY,MAAJ,CAAW,IAAIZ,IAAIa,GAAR,CAAY,CAACb,IAAIc,EAAJ,CAAO,OAAP,CAAD,OAAqBV,YAAYW,KAAjC,CAAZ,CAAX;AAJF,KAAN,EAKGC,IALH,CAKQ,gBAAsB;AAAA,UAAnBL,IAAmB,QAAnBA,IAAmB;AAAA,UAAbM,MAAa,QAAbA,MAAa;;AAC5B,UAAIA,SAAS,GAAb,EAAkB,MAAM,IAAIC,KAAJ,CAAU,sCAAV,CAAN;AAClBZ,wBAAkBa,SAAlB,GAA8BnB,IAAIoB,KAAJ,CAAUT,IAAV,EAAgBU,EAAhB,CAAmBrB,IAAIc,EAAJ,CAAO,OAAP,CAAnB,CAA9B;AACD,KARD,EAQGQ,KARH,CAQS,iBAAS;AAChBhB,wBAAkBa,SAAlB,GAA8BI,MAAMC,OAApC;AACD,KAVD;AAWD,GAZD;AAaApB,cAAYF,gBAAZ,CAA6B,OAA7B,EAAsC,YAAM;AAC1C,QAAIC,eAAJ,EAAqBsB,OAAOC,YAAP,CAAoBvB,eAApB;AACrBA,sBAAkBsB,OAAOE,UAAP,CAAkBpB,MAAlB,EAA0B,IAA1B,CAAlB;AACD,GAHD;AAIAH,cAAYF,gBAAZ,CAA6B,SAA7B,EACE;AAAA,QAAE0B,OAAF,SAAEA,OAAF;AAAA,WAAeA,WAAW,EAAX,IAAiBC,MAAMC,cAAN,EAAhC;AAAA,GADF;AAEA1B,cAAYF,gBAAZ,CAA6B,OAA7B,EACE;AAAA,QAAE0B,OAAF,SAAEA,OAAF;AAAA,WAAeA,WAAW,EAAX,IAAiBrB,QAAhC;AAAA,GADF;AAED,CAzBD","file":"public/app.js","sourcesContent":["import * as edn from 'jsedn'\nimport axios from 'axios'\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  let submitTimeoutID;\n  const inputSource = document.querySelectorAll('#input-source')[0];\n  const nativizedResponse = document.querySelectorAll('#nativized-response')[0];\n  const submit = () => {\n    axios({\n      method: 'post',\n      url: 'https://spike-ring.work/',\n      headers: {'Content-Type': 'application/edn'},\n      data: edn.encode(new edn.Map([edn.kw(\":text\"), `${inputSource.value}`]))\n    }).then(({ data, status }) => {\n      if (status > 299) throw new Error('there was a problem with the request')\n      nativizedResponse.innerHTML = edn.parse(data).at(edn.kw(\":text\"));\n    }).catch(error => {\n      nativizedResponse.innerHTML = error.message\n    })\n  }\n  inputSource.addEventListener('input', () => {\n    if (submitTimeoutID) window.clearTimeout(submitTimeoutID);\n    submitTimeoutID = window.setTimeout(submit, 1000);\n  })\n  inputSource.addEventListener('keydown',\n    ({keyCode}) => keyCode == 13 && event.preventDefault())\n  inputSource.addEventListener('keyup',\n    ({keyCode}) => keyCode == 13 && submit())\n});\n"]}